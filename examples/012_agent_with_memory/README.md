# 012 - 带记忆的代理

展示如何为AI代理添加记忆系统，实现更智能的交互体验。

## 特点

- **多层记忆**: 短期、长期、工作记忆的完整实现
- **纯Python**: 没有外部向量数据库，用标准Python数据结构
- **持久化**: 自动保存和恢复记忆状态
- **智能筛选**: LLM判断哪些信息值得长期记住

## 核心组件

### SimpleMemory
- **短期记忆**: 当前会话的交互历史
- **长期记忆**: 重要信息的持久化存储  
- **工作记忆**: 当前任务相关的临时信息

### MemoryAgent
- 结合记忆的智能交互
- 自动记忆管理和检索
- 个性化回应

## 使用方法

```bash
# 设置环境变量
export OPENAI_API_KEY="your-key-here"

# 运行示例
python main.py
```

## 记忆系统设计

```python
# 完全用户控制的记忆系统
agent = MemoryAgent("openai", "my_memory.json")

# 自动记忆重要信息
result = await agent.process_request("我叫张三，喜欢数学")

# 后续对话会记住历史
result = await agent.process_request("你还记得我的名字吗？")
```

## 记忆类型

1. **短期记忆**: 自动存储所有交互，大小限制
2. **长期记忆**: LLM筛选重要信息，持久化存储
3. **工作记忆**: 当前任务的临时上下文

## 关键特性

- **智能筛选**: LLM决定哪些信息值得记住
- **上下文搜索**: 根据输入搜索相关历史
- **持久化**: JSON文件存储，重启后记忆保持
- **个性化**: 基于历史交互调整回应风格

## 扩展想法

- 添加向量相似度搜索
- 实现记忆重要性评分
- 支持多用户记忆隔离
- 添加记忆遗忘机制
- 实现分布式记忆存储